From 6215be75de69bc6a911e0b2838b72b2cfc301a73 Mon Sep 17 00:00:00 2001
From: Seth Heeren <zfs-fuse@sehe.nl>
Date: Wed, 15 Jun 2011 11:48:46 +0200
Subject: [PATCH 2/7] reviewed INSTALL file as per #1331

---
 INSTALL |   45 +++++++++++++++++++++++----------------------
 1 files changed, 23 insertions(+), 22 deletions(-)

diff --git a/INSTALL b/INSTALL
index 5e5cf98..81d67b7 100644
--- a/INSTALL
+++ b/INSTALL
@@ -5,31 +5,22 @@ In order to compile and use zfs-fuse, you need the following:
 
  * Linux kernel 2.6.x (2.6.15 or later recommended).
 
- * FUSE 2.5.x or greater (Gentoo users: FUSE-2.6.0rc1 and some 
-earlier pre-release versions have a bug that prevents zfs-fuse
-from compiling correctly, simply upgrade to FUSE-2.6.0 or later).
+ * FUSE 2.8.x or greater
 
    You will need the fuse, fuse-utils and/or libfuse packages
 (and associated -dev packages), depending on the distribution.
 
- * libaio and libaio-dev (or libaio-devel) packages.
+ * scons
+ * libfuse-dev (>= 2.8.1)
+ * zlib1g-dev
+ * libaio-dev
+ * libssl-dev
+ * libattr1-dev
 
- * zlib (and associated headers usually provided by -dev package).
+For building a debian package, you need debhelper (>= 7.0.50~)
 
- * glibc version 2.3.3 or newer with NPTL enabled.
-   You can check these requirements with following commands:
-
-   getconf GNU_LIBC_VERSION
-   getconf GNU_LIBPTHREAD_VERSION
-
-   The output should be "glibc 2.3.3" and "NTPL 2.3.3" (or newer,
-   of course).
-
- * SCons (packaged in most distributions)
-   Only needed for compilation.
-   Website: http://www.scons.org
-
-Currently, it only works on the x86, amd64 and sparc64 architectures.
+Currently, it only works on the x86, amd64 and powerpc (untested)
+architectures.
 
 In order to use pools created on Solaris, you will probably need kernel
 support for GPT/EFI partitions. EVMS is highly recommended in this case,
@@ -47,13 +38,23 @@ To compile follow these steps:
   2) scons
 
 That's it!
+The recommended flags for packaging are
+
+  scons debug=1 optim=-O2
+
+That way, you won't have the debug asserts (which _will_ fire in known
+situations where recoverery would be possible; you don't want to enable debug
+asserts if you want to have a resilient zfs-fuse setup). But the binaries will
+have debug info attached. In most distributions it is customary to strip
+binaries, but keep the versions with symbols so you can interpret stack traces
+'from the wild'.
 
-If the compilation fails, please report a bug. See the BUGS file for
-instructions.
+If the compilation fails, please report a bug. See http://zfs-fuse.net/issues
 
 Manpage
 -------
-If you want to update the zfs-fuse man page, edit doc/zfs-fuse.man.xml and run (on a debian-like host)
+If you want to update the zfs-fuse man page, edit doc/zfs-fuse.man.xml and run
+(on a debian-like host)
 
 	apt-get install xsltproc docbook-xml docbook-xsl
 	make -C doc/
-- 
1.7.7.1

